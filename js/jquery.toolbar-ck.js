/**
 * Toolbar.js
 *
 * @fileoverview  jQuery plugin that creates tooltip style toolbars.
 * @link          http://paulkinzett.github.com/toolbar/
 * @author        Paul Kinzett (http://kinzett.co.nz/)
 * @version       1.0.4
 * @requires      jQuery 1.7+
 *
 * @license jQuery Toolbar Plugin v1.0.4
 * http://paulkinzett.github.com/toolbar/
 * Copyright 2013 Paul Kinzett (http://kinzett.co.nz/)
 * Released under the MIT license.
 * <https://raw.github.com/paulkinzett/toolbar/master/LICENSE.txt>
 */typeof Object.create!="function"&&(Object.create=function(e){function t(){}t.prototype=e;return new t});(function(e,t,n,r){var i={init:function(t,n){var r=this;r.elem=n;r.$elem=e(n);r.options=e.extend({},e.fn.toolbar.options,t);r.toolbar=e('<div class="tool-container gradient" />').addClass("tool-"+r.options.position).addClass("tool-rounded").append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide();r.toolbar_arrow=r.toolbar.find(".arrow");r.initializeToolbar()},initializeToolbar:function(){var e=this;e.populateContent();e.setTrigger();e.toolbarWidth=e.toolbar.width()},setTrigger:function(){var n=this;n.$elem.on("click",function(e){e.preventDefault();n.$elem.hasClass("pressed")?n.hide():n.show()});n.options.hideOnClick&&e("html").on("click.toolbar",function(e){e.target!=n.elem&&n.$elem.has(e.target).length===0&&n.toolbar.has(e.target).length===0&&n.toolbar.is(":visible")&&n.hide()});e(t).resize(function(e){e.stopPropagation();if(n.toolbar.is(":visible")){n.toolbarCss=n.getCoordinates(n.options.position,20);n.collisionDetection();n.toolbar.css(n.toolbarCss);n.toolbar_arrow.css(n.arrowCss)}})},populateContent:function(){var t=this,n=t.toolbar.find(".tool-items"),r=e(t.options.content).clone(!0).find("a").addClass("tool-item gradient");n.html(r);n.find(".tool-item").on("click",function(e){e.preventDefault();t.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var e=this;e.arrowCss={};e.toolbarCss=e.getCoordinates(e.options.position,0);e.toolbarCss.position="absolute";e.toolbarCss.zIndex=e.options.zIndex;e.collisionDetection();e.toolbar.css(e.toolbarCss);e.toolbar_arrow.css(e.arrowCss)},getCoordinates:function(e,t){var n=this;n.coordinates=n.$elem.offset();n.options.adjustment&&n.options.adjustment[n.options.position]&&(t=n.options.adjustment[n.options.position]);switch(n.options.position){case"top":return{left:n.coordinates.left-n.toolbar.width()/2+n.$elem.outerWidth()/2,top:n.coordinates.top-n.$elem.height()-t,right:"auto"};case"left":return{left:n.coordinates.left-n.toolbar.width()/2-n.$elem.width()/2-t,top:n.coordinates.top-n.toolbar.height()/2+n.$elem.outerHeight()/2,right:"auto"};case"right":return{left:n.coordinates.left+n.toolbar.width()/2+n.$elem.width()/3+t,top:n.coordinates.top-n.toolbar.height()/2+n.$elem.outerHeight()/2,right:"auto"};case"bottom":return{left:n.coordinates.left-n.toolbar.width()/2+n.$elem.outerWidth()/2,top:n.coordinates.top+n.$elem.height()+t,right:"auto"}}},collisionDetection:function(){var n=this,r=20;if(n.options.position=="top"||n.options.position=="bottom"){n.arrowCss={left:"50%",right:"50%"};if(n.toolbarCss.left<r){n.toolbarCss.left=r;n.arrowCss.left=n.$elem.offset().left+n.$elem.width()/2-r}else if(e(t).width()-(n.toolbarCss.left+n.toolbarWidth)<r){n.toolbarCss.right=r;n.toolbarCss.left="auto";n.arrowCss.left="auto";n.arrowCss.right=e(t).width()-n.$elem.offset().left-n.$elem.width()/2-r-5}}},show:function(){var e=this,t={opacity:1};e.$elem.addClass("pressed");e.calculatePosition();switch(e.options.position){case"top":t.top="-=20";break;case"left":t.left="-=20";break;case"right":t.left="+=20";break;case"bottom":t.top="+=20"}e.toolbar.show().animate(t,200);e.$elem.trigger("toolbarShown")},hide:function(){var e=this,t={opacity:0};e.$elem.removeClass("pressed");switch(e.options.position){case"top":t.top="+=20";break;case"left":t.left="+=20";break;case"right":t.left="-=20";break;case"bottom":t.top="-=20"}e.toolbar.animate(t,200,function(){e.toolbar.hide()});e.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};e.fn.toolbar=function(t){if(e.isPlainObject(t))return this.each(function(){var n=Object.create(i);n.init(t,this);e(this).data("toolbarObj",n)});if(typeof t=="string"&&t.indexOf("_")!==0){var n=e(this).data("toolbarObj"),r=n[t];return r.apply(n,e.makeArray(arguments).slice(1))}};e.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:!1,zIndex:120}})(jQuery,window,document);